{
  "name": "battle-completion-worker",
  "version": "1.0.0",
  "description": "Worker service for automatic battle completion",
  "main": "battle-completion-worker.js",
  "scripts": {
    "start": "tsx battle-completion-worker.ts",
    "dev": "tsx watch battle-completion-worker.ts",
    "build": "tsc",
    "start:prod": "node dist/battle-completion-worker.js",
    "deploy": "./scripts/deploy.sh",
    "deploy:build": "gcloud builds submit --tag gcr.io/battle-worker-phraseflow/battle-completion-worker .",
    "deploy:run": "gcloud run deploy battle-completion-worker --image gcr.io/battle-worker-phraseflow/battle-completion-worker --platform managed --region us-central1 --allow-unauthenticated --port 3001 --memory 512Mi --cpu 1 --min-instances 1 --max-instances 10 --timeout 3600 --set-env-vars NODE_ENV=production,NEWS_SOURCE=serper --set-secrets DATABASE_URL=database-url:latest,GOOGLE_GENERATIVE_AI_API_KEY=google-generative-ai-api-key:latest,SERPER_API_KEY=serper-api-key:latest,WORKER_API_KEY=battle-worker-secrets:latest,DEBATE_POOL_CONTRACT_ADDRESS=debate-pool-contract-address:latest,ORACLE_PRIVATE_KEY=oracle-private-key:latest,BASE_SEPOLIA_RPC=base-sepolia-rpc:latest",
    "deploy:full": "npm run deploy:build && npm run deploy:run",
    "logs": "gcloud logging read \"resource.type=cloud_run_revision AND resource.labels.service_name=battle-completion-worker\" --limit=20 --format=\"table(timestamp,severity,textPayload)\"",
    "test:health": "curl -s https://battle-completion-worker-733567590021.us-central1.run.app/health | jq .",
    "test:status": "curl -s -H \"X-API-Key: 92d4cca6-2987-417c-b6bf-36ac4cba6972\" https://battle-completion-worker-733567590021.us-central1.run.app/status | jq .",
    "test": "mocha -r ts-node/register 'test/**/*.test.ts'",
    "test:integration": "mocha -r ts-node/register 'test/integration/**/*.test.ts'",
    "test:watch": "mocha -r ts-node/register 'test/**/*.test.ts' --watch"
  },
  "dependencies": {
    "@ai-sdk/google": "^2.0.14",
    "@prisma/client": "^5.22.0",
    "ai": "^5.0.47",
    "axios": "^1.12.2",
    "dotenv": "^17.2.2",
    "ethers": "^6.0.0",
    "prisma": "^5.0.0",
    "zod": "^3.25.76"
  },
  "devDependencies": {
    "@types/chai": "^4.3.20",
    "@types/mocha": "^10.0.10",
    "@types/node": "^20.0.0",
    "chai": "^4.5.0",
    "mocha": "^10.8.2",
    "ts-node": "^10.9.2",
    "tsx": "^4.0.0",
    "typescript": "^5.0.0"
  }
}
