# Battle Completion Worker Environment Variables
# Copy this file to .env and fill in your actual values

# =============================================================================
# REQUIRED ENVIRONMENT VARIABLES
# =============================================================================

# Node.js Environment
NODE_ENV=production

# Database Configuration
DATABASE_URL=postgresql://username:password@host:port/database_name?schema=public

# AI Service Configuration
GOOGLE_GENERATIVE_AI_API_KEY=your_google_ai_api_key_here

# News Service Configuration
NEWS_SOURCE=serper
SERPER_API_KEY=your_serper_api_key_here
CURRENTS_API_KEY=your_currents_api_key_here

# Worker Security
WORKER_API_KEY=your_worker_api_key_here

# =============================================================================
# OPTIONAL ENVIRONMENT VARIABLES (with defaults)
# =============================================================================

# Server Configuration
PORT=3001
WORKER_PORT=3001

# Battle Configuration
BATTLE_DURATION_HOURS=4
BATTLE_MAX_PARTICIPANTS=1000

# =============================================================================
# SAMPLE VALUES (REPLACE WITH YOUR ACTUAL VALUES)
# =============================================================================

# Example DATABASE_URL for Neon PostgreSQL:
# DATABASE_URL=postgresql://username:password@ep-xxx.us-east-1.aws.neon.tech/neondb?sslmode=require

# Example DATABASE_URL for local PostgreSQL:
# DATABASE_URL=postgresql://postgres:password@localhost:5432/cast_battle_db

# Example GOOGLE_GENERATIVE_AI_API_KEY:
# GOOGLE_GENERATIVE_AI_API_KEY=AIzaSyD4m5fsqQycf8QKAVC088j802mxM2Qz-q8

# Example SERPER_API_KEY:
# SERPER_API_KEY=28f3c10e8a7637ec90b3c5360a2b703c97aa6246

# Example CURRENTS_API_KEY:
# CURRENTS_API_KEY=your_currents_api_key

# Example WORKER_API_KEY:
# WORKER_API_KEY=92d4cca6-2987-417c-b6bf-36ac4cba6972

# =============================================================================
# DEPLOYMENT NOTES
# =============================================================================

# For Google Cloud Run deployment, these variables are set as secrets:
# - DATABASE_URL (secret: database-url)
# - GOOGLE_GENERATIVE_AI_API_KEY (secret: google-generative-ai-api-key)
# - SERPER_API_KEY (secret: serper-api-key)
# - CURRENTS_API_KEY (secret: currents-api-key)
# - WORKER_API_KEY (secret: battle-worker-secrets)

# Environment variables set directly in Cloud Run:
# - NODE_ENV=production
# - NEWS_SOURCE=serper
# - PORT=3001 (automatically set by Cloud Run)

# =============================================================================
# LOCAL DEVELOPMENT SETUP
# =============================================================================

# 1. Copy this file to .env:
#    cp .env.example .env

# 2. Fill in your actual values for all required variables

# 3. Run the worker locally:
#    npm run dev

# 4. Test the health endpoint:
#    curl http://localhost:3001/health

# =============================================================================
# PRODUCTION DEPLOYMENT SETUP
# =============================================================================

# 1. Create secrets in Google Secret Manager:
#    gcloud secrets create database-url --data-file=- <<< "your_database_url"
#    gcloud secrets create google-generative-ai-api-key --data-file=- <<< "your_google_ai_key"
#    gcloud secrets create serper-api-key --data-file=- <<< "your_serper_key"
#    gcloud secrets create currents-api-key --data-file=- <<< "your_currents_key"
#    gcloud secrets create battle-worker-secrets --data-file=- <<< "your_worker_api_key"

# 2. Deploy using the standard GCP approach:
#    gcloud run deploy battle-completion-worker --source . --platform managed --region us-central1 --allow-unauthenticated --port 3001 --memory 512Mi --cpu 1 --min-instances 1 --max-instances 10 --timeout 3600 --set-env-vars NODE_ENV=production,NEWS_SOURCE=serper --set-secrets DATABASE_URL=database-url:latest,GOOGLE_GENERATIVE_AI_API_KEY=google-generative-ai-api-key:latest,SERPER_API_KEY=serper-api-key:latest,CURRENTS_API_KEY=currents-api-key:latest,WORKER_API_KEY=battle-worker-secrets:latest --service-account=733567590021-compute@developer.gserviceaccount.com
